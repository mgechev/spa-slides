<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" href="./css/reveal.css" />
        <link rel="stylesheet" href="./css/theme/default.css" />
        <link rel="stylesheet" href="./css/theme/highlightjs.css">
        <style>
            .jungle-text {
                -webkit-transform: scale(10) rotateZ(0deg);
                opacity: 0;
                display: none;
                color: red !important;
            }
            .jungle-text-show {
                -webkit-transform: scale(1) rotateZ(40deg);
                display: block;
                opacity: 1
            }
        </style>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1 style="text-align: left;">Single-Page Applications</h1>
                    <p style="margin-bottom: 80px;">
                        <ul style="float: left;">
                            <li><a href="http://blog.mgechev.com/">Minko Gechev</a></li>
                            <li><a href="http://github.com/mgechev">github.com/mgechev</a></li>
                            <li><a href="http://twitter.com/mgechev">twitter.com/mgechev</a></li>
                        </ul>
                    </p>
                </section>
                <section>
                    <h2>Content</h2>
                    <ul>
                        <li>SPA?</li>
                        <li>Architecture</li>
                        <li>Packaging</li>
                        <li>Run-time state</li>
                        <li>Optimisations</li>
                    </ul>
                </section>
                <section>
                    <h2>SPA</h2>
                    <div class="spa-container">
                        <svg xmlns="http://www.w3.org/2000/svg" height="600" width="600" xmlns:xlink= "http://www.w3.org/1999/xlink">
                            <image xlink:href="./images/spa.jpg" width="600" height="600" x="0" y="0" z-index="1" />
                            <path id="s1" d="M 0 0 600 600 " stroke-width="14" fill="none" stroke="red" z-index="200" style="visibility: hidden;" />
                            <path id="s2" d="M 600 0 0 600 " stroke-width="14" fill="none" stroke="red" z-index="200" style="visibility: hidden;" />
                        </svg>
                    </div>
                    <script>
                        (function () {
                            function animateStroke(path, duration) {
                                path.style.visibility = 'visible';
                                var length = path.getTotalLength();
                                path.style.transition = path.style.WebkitTransition =
                                  'none';
                                path.style.strokeDasharray = length + ' ' + length;
                                path.style.strokeDashoffset = length;
                                path.getBoundingClientRect();
                                path.style.transition = path.style.WebkitTransition =
                                  'stroke-dashoffset ' + duration + 's ease-in-out';
                                path.style.strokeDashoffset = '0';
                            }
                            document.querySelector('.spa-container').onclick = function () {
                                animateStroke(document.querySelector('#s1'), 1);
                                setTimeout(function () {
                                    animateStroke(document.querySelector('#s2'), 1);
                                }, 1000);
                            };
                        }());
                    </script>
                </section>
                <section>
                    <h2>SPA</h2>
                    <img src="./images/spa-real.jpg" width="600" alt="" />
                </section>
                <section>
                    <section data-background="images/jungle.jpg">
                        <h3 id="mvc-headline">MV* frameworks</h3>
                        <h1 class="jungle-text">Welcome to the jungle!</h1>
                        <script>
                            document.getElementById('mvc-headline').onclick = function () {
                                document.getElementsByClassName('jungle-text')[0].classList.add('jungle-text-show');
                            };
                        </script>
                    </section>
                    <section>
                        <h2>MV* frameworks</h2>
                        <ul>
                            <li class="fragment">CanJS</li>
                            <li class="fragment">Maria</li>
                            <li class="fragment">Polymer</li>
                            <li class="fragment">cujoJS</li>
                            <li class="fragment">dermis</li>
                            <li class="fragment">Montage</li>
                            <li class="fragment">Sammy.js</li>
                            <li class="fragment">Strapes</li>
                            <li class="fragment">Epitome</li>
                            <li class="fragment">Ext.js</li>
                        </ul>
                        <ul>
                            <li class="fragment">AngularJS</li>
                            <li class="fragment">Ember.js</li>
                            <li class="fragment">KnockoutJS</li>
                            <li class="fragment">Dojo</li>
                            <li class="fragment">YUI</li>
                            <li class="fragment">Agility.js</li>
                            <li class="fragment">soma.js</li>
                            <li class="fragment">DUEL</li>
                            <li class="fragment">Kendo UI</li>
                            <li class="fragment">PureMVC</li>
                        </ul>
                        
                        <ul>
                            <li class="fragment">Backbone.js</li>
                            <li class="fragment">Knockback.js</li>
                            <li class="fragment">Olives</li>
                            <li class="fragment">PlastronJS</li>
                            <li class="fragment">Dijon</li>
                            <li class="fragment">rAppid.js</li>
                            <li class="fragment">Funnyface.js</li>
                            <li class="fragment">Aria Templates</li>
                            <li class="fragment">React</li>
                            <li class="fragment">SAPTUI5</li>
                        </ul>
                    </section>
                    <section>
                        <h2>and wait for it...</h2>
                        <ul>
                            <li class="fragment" data-fragment-index="1">Aura.js</li>
                            <li class="fragment" data-fragment-index="2">ScaleApp</li>
                            <li class="fragment" data-fragment-index="3">Kernel.js</li>
                            <li class="fragment" data-fragment-index="4">Hydra.js</li>
                            <li class="fragment" data-fragment-index="5">Terrifically</li>
                        </ul>
                    </section>
                    <section>
                        <h2>ONLY AngularJS</h2>
                        <h3 class="fragment">...and a bit Backbone.js</h3>
                    </section>
                </section>
                <section>
                    <h2>Conceptual overview</h2>
                    <img src="./images/communication-spa.png" alt="" />
                </section>
                <section>
                    <h2>DOM</h2>
                    <ul>
                        <li>Generated from the templates</li>
                        <li>Emit events (different handlers)</li>
                        <li>
                            Write-only!
                            <ul>
                                <li>performance</li>
                                <li>consistency</li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section>
                    <section>
                        <h2>Model</h2>
                        <ul>
                            <li>Holds the data in-memory</li>
                            <li>
                                Responsible for storing and fetching itself
                                <ul>
                                    <li>
                                        Additional "services"
                                        <ul>
                                            <li>Repository</li>
                                            <li>Gateway/Data mapper</li>
                                        </ul> 
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>AngularJS</h2>
                        <pre>
                            <code class="javascript">
    function PhoneListCtrl($scope, PhonesCollection) {
        $scope.phones = PhonesCollection.getPhones(); //Synchronous, resolve...
        $scope.removeClicked = function (phone) {
            $scope.phones.splice($scope.phones.indexOf(phone), 1);
            PhonesCollection.setPhones($scope.phones);
        };
    }
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Repository</h2>
                        <blockquote cite="http://martinfowler.com/eaaCatalog/repository.html">
    Mediates between the domain and data mapping layers using a collection-like interface for accessing domain objects.
                        </blockquote>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Views</h2>
                        <img src="images/gmail.png" alt="" />
                    </section>
                    <section>
                        <h2>Views</h2>
                        <ul>
                            <li>Rendered from templates</li>
                            <li>Affect on the models</li>
                            <li>Multiple views depending on the same model (events)</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Templates</h2>
                        <pre>
                            <code class="html">
<ul>
    {{#phones}}
        <li>{{phone}}</li>
    {{/phones}}
</ul>
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Templates</h2>
                        <ul>
                            <li>Save us from complex concatenations</li>
                            <li>Build DOM by given model and rules</li>
                            <li>Efficiency</li>
                        </ul>
                    </section>
                    <section>
                        <h2>AngularJS</h2>
                        <pre>
                            <code>
<div ng-controller="PhonesListCtrl">
    <ul>
        <li ng-repeat="phone in phones">{{phone.name}}</li>
    </ul>
</div>
                            </code>
                        </pre>
                    </section>
                </section>
                <section>
                    <h1>Controllers must die?</h1>
                </section>
                <section>
                    <h2>Controllers responsibilities</h2>
                    <blockquote cite="http://spinejs.com/docs/controllers">
Controllers deal with adding and responding to DOM events, rendering templates and keeping views and models in sync
                    </blockquote>
                </section>
                <section>
                    <h2>Isn't that too much?</h2>
                    <blockquote>
In object-oriented programming, the single responsibility principle states that every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class. All its services should be narrowly aligned with that responsibility.
                    </blockquote>
                </section>
                <section>
                    <h2>Why not...</h2>
                    <ul>
                        <li>View refers to it's template and is being rendered by a template engine</li>
                        <li>Model triggers events on change, the view captures these events and update itself</li>
                    </ul>
                </section>
                <section>
                    <h2>How is in AngularJS</h2>
                    <ul>
                        <li>We have controllers!</li>
                        <li>They glue the view and the model</li>
                        <li>They look a bit like the code-behinds<br />in ASP.NET WebForms</li>
                    </ul>
                </section>
                <section>
                    <h3>How to make it maintainable?</h3>
                    <h2 class="fragment">Modularity!</h3>
                    <h3 class="fragment">...but everything should have its limits</h3>
                </section>
                <section>
                    <h2>Why modularity?</h2>
                    <ul>
                        <li class="fragment">Independent modules with strongly defined interface</li>
                        <li class="fragment">Abstraction</li>
                        <li class="fragment">Each module should do ONE thing</li>
                    </ul>
                </section>
                <section>
                    <h3>Okay we can achieve SOLID?</h3>
                    <h3 class="fragment">...but what about GRASP?</h3>
                    <ul>
                        <li class="fragment">Strongly coupled modules sucks!</li>
                    </ul>
                </section>
                <section>
                    <h3>So we need mediator?</h3>
                    <h2 class="fragment">Publish/subscribe</h2>
                    <ul class="fragment">
                        <li>In may be more than 90% of the frameworks above!</li>
                        <li>And yes, AngularJS is in these 90%</li>
                    </ul>
                </section>
                <section>
                    <h2>AngularJS</h2>
                    <pre>
                        <code class="javascript">
    function ParentCtrl($scope) {
        $scope.parentMethod = function () {
            /* body */
        };
        $scope.$on('event-name', function (event, param) {
            /* body */
        });
    }

    function ChildCtrl($scope) {
        $scope.childMethod = function () {
            /* body */
        };
        $scope.parentMethod();
        $scope.$emit('event-name', { /* parameter */});
    }
                        </code>
                    </pre>
                </section>
                <section>
                    <h2>Sample implementation</h2>
                    <pre>
                        <code class="javascript">
    var pubsub = {};
    (function(q) {
        var topics = {};
        q.publish = function (topic, args) {
            if (!topics[topic]) {
                return false;
            }
            var subscribers = topics[topic],
                len = subscribers ? subscribers.length : 0;
            while (len--) {
                subscribers[len].call(null, topic, args);
            }
            return this;
        };
        q.subscribe = function (topic, func) {
            if (!topics[topic]) {
                topics[topic] = [];
            }
            topics[topic].push(func);
            return this;
        };
    }(pubsub));
                        </code>
                    </pre>
                </section>
                <section>
                    <h2>Code organisation</h2>
                    <ul style="font-size: 25px; line-height: 30px;">
                        <li>
                        js
                            <ul>
                                <li>
                                    controllers
                                    <ul>
                                        <li>home
                                            <ul>
                                                <li>MainCtrl.js</li>
                                                <li>FormCtrl.js</li>
                                            </ul> 
                                        </li>
                                        <li>contacts</li>
                                    </ul>
                                </li>
                                <li>directives</li>
                                <li>filters</li>
                                <li>animations</li>
                                <li>animations</li>
                            </ul>
                        </li>
                        <li>
                        partials
                            <ul>
                                <li>
                                home
                                    <ul>
                                        <li>master.html</li> 
                                        <li>sidebar.html</li> 
                                    </ul>
                                </li>
                                <li>
                                    contacts
                                    <ul>
                                        <li>master.html</li> 
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>How AngularJS helps?</h2>
                    <ul>
                        <li>A lot of boilerplates</li>
                        <li>Efficient</li>
                    </ul>
                </section>
            </div>
        </div>
        <script src="./js/reveal.js"></script>
        <script src="./js/highlightjs.js"></script>
        <script>
            Reveal.initialize({ history: true });
            hljs.initHighlightingOnLoad();
        </script>
    </body>
</html>
