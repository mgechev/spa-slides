<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link rel="stylesheet" href="./css/reveal.css" />
        <link rel="stylesheet" href="./css/theme/default.css" />
        <link rel="stylesheet" href="./css/theme/highlightjs.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1 style="text-align: left;">Single-Page Applications</h1>
                    <p style="margin-bottom: 80px;">
                        <ul style="float: left;">
                            <li><a href="http://blog.mgechev.com/">Minko Gechev</a></li>
                            <li><a href="http://github.com/mgechev">github.com/mgechev</a></li>
                            <li><a href="http://twitter.com/mgechev">twitter.com/mgechev</a></li>
                        </ul>
                    </p>
                </section>
                <section>
                    <h2>Content</h2>
                    <ul>
                        <li>SPA?</li>
                        <li>Architecture</li>
                        <li>Packaging</li>
                        <li>Run-time state</li>
                        <li>Optimisations</li>
                    </ul>
                </section>
                <section>
                    <h2>SPA</h2>
                    <div class="spa-container">
                        <svg xmlns="http://www.w3.org/2000/svg" height="600" width="600" xmlns:xlink= "http://www.w3.org/1999/xlink">
                            <image xlink:href="./images/spa.jpg" width="600" height="600" x="0" y="0" z-index="1" />
                            <path id="s1" d="M 0 0 600 600 " stroke-width="14" fill="none" stroke="red" z-index="200" style="visibility: hidden;" />
                            <path id="s2" d="M 600 0 0 600 " stroke-width="14" fill="none" stroke="red" z-index="200" style="visibility: hidden;" />
                        </svg>
                    </div>
                    <script>
                        (function () {
                            function animateStroke(path, duration) {
                                path.style.visibility = 'visible';
                                var length = path.getTotalLength();
                                path.style.transition = path.style.WebkitTransition =
                                  'none';
                                path.style.strokeDasharray = length + ' ' + length;
                                path.style.strokeDashoffset = length;
                                path.getBoundingClientRect();
                                path.style.transition = path.style.WebkitTransition =
                                  'stroke-dashoffset ' + duration + 's ease-in-out';
                                path.style.strokeDashoffset = '0';
                            }
                            document.querySelector('.spa-container').onclick = function () {
                                animateStroke(document.querySelector('#s1'), 1);
                                setTimeout(function () {
                                    animateStroke(document.querySelector('#s2'), 1);
                                }, 1000);
                            };
                        }());
                    </script>
                </section>
                <section>
                    <h2>SPA</h2>
                    <img src="./images/spa-real.jpg" alt="" />
                </section>
                <section>
                    <h2>MV* frameworks</h2>
                    <ul>
                        <li>Backbone.js</li>
                        <li>AngularJS</li>
                        <li>Ember.js</li>
                        <li>KnockoutJS</li>
                        <li>Dojo</li>
                        <li>YUI</li>
                        <li>Agility.js</li>
                        <li>Knockback.js</li>
                        <li>CanJS</li>
                        <li>Maria</li>
                        <li>Polymer</li>
                        <li>cujoJS</li>
                        <li>dermis</li>
                        <li>Montage</li>
                        <li>Ext.js</li>
                        <li>Sammy.js</li>
                        <li>Strapes</li>
                        <li>Epitome</li>
                        <li>soma.js</li>
                        <li>DUEL</li>
                        <li>Kendo UI</li>
                        <li>PureMVC</li>
                        <li>Olives</li>
                        <li>PlastronJS</li>
                        <li>Dijon</li>
                        <li>rAppid.js</li>
                        <li>Funnyface.js</li>
                        <li>Aria Templates</li>
                        <li>React</li>
                        <li>SAPTUI5</li>
                    </ul>
                </section>
                <section>
                    <h2>Overview</h2>
                    <img src="./images/communication-spa.png" alt="" />
                </section>
                <section>
                    <h2>DOM</h2>
                    <ul>
                        <li>Generated from the templates</li>
                        <li>Emit events (different handlers)</li>
                        <li>
                            Write-only!
                            <ul>
                                <li>performance</li>
                                <li>consistency</li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section>
                    <section>
                        <h2>Model</h2>
                        <ul>
                            <li>Holds the data in-memory</li>
                            <li>
                                Responsible for storing and fetching itself
                                <ul>
                                    <li>
                                        Additional "services"
                                        <ul>
                                            <li>Repository</li>
                                            <li>Gateway/Data mapper</li>
                                        </ul> 
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>Angular</h2>
                        <pre>
                            <code class="javascript">
    function PhoneListCtrl($scope, PhonesCollection) {
        $scope.phones = PhonesCollection.getPhones(); //Synchronous, resolve...
        $scope.removeClicked = function (phone) {
            $scope.phones.splice($scope.phones.indexOf(phone), 1);
            PhonesCollection.setPhones($scope.phones);
        };
    }
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Repository</h2>
                        <blockquote cite="http://martinfowler.com/eaaCatalog/repository.html">
    Mediates between the domain and data mapping layers using a collection-like interface for accessing domain objects.
                        </blockquote>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Views</h2>
                        <img src="images/gmail.png" alt="" />
                    </section>
                    <section>
                        <h2>Views</h2>
                        <ul>
                            <li>Rendered from templates</li>
                            <li>Affect on the models</li>
                            <li>Multiple views depending on the same model (events)</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Templates</h2>
                        <pre>
                            <code class="html">
<ul>
    {{#phones}}
        <li>{{phone}}</li>
    {{/phones}}
</ul>
                            </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Templates</h2>
                        <ul>
                            <li>Save us from complex concatenations</li>
                            <li>Build DOM by given model and rules</li>
                            <li>Efficiency</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Angular</h2>
                        <pre>
                            <code>
<div ng-controller="PhonesListCtrl">
    <ul>
        <li ng-repeat="phone in phones">{{phone.name}}</li>
    </ul>
</div>
                            </code>
                        </pre>
                    </section>
                </section>
                <section>
                    <h1>Controllers must die?</h1>
                </section>
                <section>
                    <h2>Controllers responsibilities</h2>
                    <blockquote cite="http://spinejs.com/docs/controllers">
Controllers deal with adding and responding to DOM events, rendering templates and keeping views and models in sync
                    </blockquote>
                </section>
                <section>
                    <h2>Isn't that too much?</h2>
                    <blockquote>
In object-oriented programming, the single responsibility principle states that every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class. All its services should be narrowly aligned with that responsibility.
                    </blockquote>
                </section>
                <section>
                    <h2>Why not...</h2>
                    <ul>
                        <li>View reffers to it's template and is being rendered by a rendering enging</li>
                        <li>Model triggers events on change, the view captures these events and update itself</li>
                    </ul>
                </section>
                <section>
                    <h2>How is in Angularjs</h2>
                    <ul>
                        <li>We have controllers!</li>
                        <li>They glue the view and the model</li>
                        <li>They glue the view and the model</li>
                    </ul>
                </section>
            </div>
        </div>
        <script src="./js/reveal.js"></script>
        <script src="./js/highlightjs.js"></script>
        <script>
            Reveal.initialize({ history: true });
            hljs.initHighlightingOnLoad();
        </script>
    </body>
</html>
